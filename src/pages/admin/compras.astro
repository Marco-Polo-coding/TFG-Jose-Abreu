---
import AdminLayout from '../../layouts/AdminLayout.astro';
import CompraManagement from '../../components/admin/CompraManagement.jsx';

// Indicar que esta p√°gina debe ser renderizada en el servidor
export const prerender = false;

// Verificar si el usuario es administrador usando solo cookies
const userRole = Astro.cookies.get('userRole')?.value;
const isAdmin = userRole === 'admin';

// Si no es admin, redirigir al inicio
if (!isAdmin) {
  return Astro.redirect('/');
}
---

<AdminLayout title="Compras">
  <CompraManagement client:load />
</AdminLayout>